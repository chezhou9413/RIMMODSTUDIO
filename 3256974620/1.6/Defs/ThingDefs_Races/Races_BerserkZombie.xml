<?xml version="1.0" encoding="utf-8"?>
<Defs>
    <!-- 
        狂暴僵尸生物定义
        基于BasePawn，继承基础生物属性
    -->
    <ThingDef ParentName="BasePawn">
        <defName>BerserkZombie</defName>
        <label>berserk zombie</label>
        
        <!-- 描述：狂暴僵尸比普通蹒跚者更快更危险 -->
        <description>A corpse reanimated by dark psychic energy. Berserk zombies move faster and attack more aggressively than regular shamblers. They are relentless in their pursuit of the living.</description>
        
        <!-- 隐藏未发现的实体 -->
        <hiddenWhileUndiscovered>true</hiddenWhileUndiscovered>
        
        <!-- 基础属性 -->
        <statBases>
            <!-- 移动速度：比Shambler更快（Shambler约2.5，这里设为3.5） -->
            <MoveSpeed>3.5</MoveSpeed>
            
            <!-- 舒适温度范围 -->
            <ComfyTemperatureMin>-40</ComfyTemperatureMin>
            <ComfyTemperatureMax>60</ComfyTemperatureMax>
            
            <!-- 灵能敏感度 -->
            <PsychicSensitivity>1.5</PsychicSensitivity>
            
            <!-- 最小收容强度 -->
            <MinimumContainmentStrength>40</MinimumContainmentStrength>
            
            <!-- 皮革和肉 -->
            <LeatherAmount>20</LeatherAmount>
            <MeatAmount>70</MeatAmount>
            
            <!-- 毒性抗性 -->
            <ToxicResistance>0.5</ToxicResistance>
            
            <!-- 真空抗性（如果安装了Odyssey DLC） -->
            <VacuumResistance MayRequire="Ludeon.RimWorld.Odyssey">1</VacuumResistance>
        </statBases>
        
        <!-- 不可交易 -->
        <tradeability>None</tradeability>
        
        <!-- 种族属性 -->
        <race>
            <!-- AI思维树：使用Shambler的思维树，或者创建自定义的 -->
            <thinkTreeMain>Shambler</thinkTreeMain>
            <thinkTreeConstant>ShamblerConstant</thinkTreeConstant>
            
            <!-- 身体：使用人类身体 -->
            <body>Human</body>
            
            <!-- 身体大小 -->
            <baseBodySize>1</baseBodySize>
            
            <!-- 生命值倍率 -->
            <baseHealthScale>0.9</baseHealthScale>
            
            <!-- 智力等级 -->
            <intelligence>ToolUser</intelligence>
            
            <!-- 不需要休息 -->
            <needsRest>false</needsRest>
            
            <!-- 无性别 -->
            <hasGenders>false</hasGenders>
            
            <!-- 食物类型：不需要 -->
            <foodType>None</foodType>
            
            <!-- 血液和血迹 -->
            <bloodDef>Filth_DarkBlood</bloodDef>
            <bleedRateFactor>0.5</bleedRateFactor>
            
            <!-- 肉体类型：异常实体肉体 -->
            <fleshType>EntityFlesh</fleshType>
            
            <!-- 免疫感染 -->
            <isImmuneToInfections>true</isImmuneToInfections>
            
            <!-- 特定肉类和皮革 -->
            <specificMeatDef>Meat_Twisted</specificMeatDef>
            <leatherDef>Leather_Dread</leatherDef>
            
            <!-- 寿命 -->
            <lifeExpectancy>15</lifeExpectancy>
            
            <!-- 近战音效 -->
            <soundMeleeHitPawn>Pawn_Melee_SmallScratch_HitPawn</soundMeleeHitPawn>
            <soundMeleeHitBuilding>Pawn_Melee_SmallScratch_HitBuilding</soundMeleeHitBuilding>
            <soundMeleeMiss>Pawn_Melee_SmallScratch_Miss</soundMeleeMiss>
            <soundMeleeDodge>Pawn_MeleeDodge</soundMeleeDodge>
            
            <!-- 禁用点燃 -->
            <disableIgniteVerb>true</disableIgniteVerb>
            
            <!-- 不可训练 -->
            <trainability>None</trainability>
            
            <!-- 可以变成蹒跚者 -->
            <canBecomeShambler>true</canBecomeShambler>
            
            <!-- 生命阶段 -->
            <lifeStageAges>
                <li>
                    <def>EntityFullyFormed</def>
                    <!-- 音效（可选，需要先定义SoundDef） -->
                    <!-- <soundCall>Pawn_BerserkZombie_Call</soundCall>
                    <soundWounded>Pawn_BerserkZombie_Wounded</soundWounded>
                    <soundDeath>Pawn_BerserkZombie_Death</soundDeath> -->
                </li>
            </lifeStageAges>
            
            <!-- 疾病给予器集合 -->
            <hediffGiverSets>
                <li>AnomalyEntity</li>
            </hediffGiverSets>
            
            <!-- 尸体在未发现时隐藏 -->
            <corpseHiddenWhileUndiscovered>true</corpseHiddenWhileUndiscovered>
        </race>
        
        <!-- 组件 -->
        <comps>
            <!-- 可被收容平台收容 -->
            <li Class="CompProperties_HoldingPlatformTarget">
                <!-- 逃脱间隔（平均天数） -->
                <baseEscapeIntervalMtbDays>45</baseEscapeIntervalMtbDays>
            </li>
            
            <!-- 产生生物铁 -->
            <li Class="CompProperties_ProducesBioferrite">
                <bioferriteDensity>2</bioferriteDensity>
            </li>
            
            <!-- 可研究 -->
            <li Class="CompProperties_Studiable">
                <!-- 研究频率（游戏刻） -->
                <frequencyTicks>120000</frequencyTicks>
                <!-- 知识类别 -->
                <knowledgeCategory>Basic</knowledgeCategory>
                <!-- 异常知识点数 -->
                <anomalyKnowledge>1.5</anomalyKnowledge>
                <!-- 最小单石等级 -->
                <minMonolithLevelForStudy>1</minMonolithLevelForStudy>
                <!-- 需要收容平台 -->
                <requiresHoldingPlatform>true</requiresHoldingPlatform>
            </li>
            
            <!-- 附着点（用于收容平台） -->
            <li Class="CompProperties_AttachPoints">
                <points>
                    <li>
                        <offset>(-.25, 0, .15)</offset>
                        <type>PlatformRestraint0</type>
                    </li>
                    <li>
                        <offset>(.35, 0, .45)</offset>
                        <type>PlatformRestraint1</type>
                    </li>
                    <li>
                        <offset>(.15, 0, -.6)</offset>
                        <type>PlatformRestraint2</type>
                    </li>
                    <li>
                        <offset>(-.15, 0, -.6)</offset>
                        <type>PlatformRestraint3</type>
                    </li>
                </points>
            </li>
        </comps>
        
        <!-- 武器工具 -->
        <tools>
            <!-- 左手爪 -->
            <li>
                <label>left claw</label>
                <labelNoLocation>claw</labelNoLocation>
                <capacities>
                    <li>Scratch</li>
                </capacities>
                <!-- 伤害：比Shambler更高 -->
                <power>8.0</power>
                <cooldownTime>1.8</cooldownTime>
                <linkedBodyPartsGroup>LeftHand</linkedBodyPartsGroup>
                <alwaysTreatAsWeapon>true</alwaysTreatAsWeapon>
            </li>
            
            <!-- 右手爪 -->
            <li>
                <label>right claw</label>
                <labelNoLocation>claw</labelNoLocation>
                <capacities>
                    <li>Scratch</li>
                </capacities>
                <power>8.0</power>
                <cooldownTime>1.8</cooldownTime>
                <linkedBodyPartsGroup>RightHand</linkedBodyPartsGroup>
                <alwaysTreatAsWeapon>true</alwaysTreatAsWeapon>
            </li>
            
            <!-- 头部攻击 -->
            <li>
                <label>head</label>
                <capacities>
                    <li>Blunt</li>
                </capacities>
                <power>4</power>
                <cooldownTime>2</cooldownTime>
                <linkedBodyPartsGroup>HeadAttackTool</linkedBodyPartsGroup>
                <ensureLinkedBodyPartsGroupAlwaysUsable>true</ensureLinkedBodyPartsGroupAlwaysUsable>
                <chanceFactor>0.1</chanceFactor>
            </li>
        </tools>
    </ThingDef>
</Defs>
